# Prismaze Generator Metrics Dashboard Spec

This document defines the key metrics tracked by the QA pipeline to ensure the "Global Endless Contract" remains stable and high-quality.

## 1. Stability (Pass/Fail)
- **Determinism %**: Percentage of levels that produce identical results on repeat runs. Target: **100%**.
- **Solvability %**: Percentage of generated levels that pass the `ReplayValidator`. Target: **100%**.
- **Fallback Rate**: Frequency of `FallbackHandler` triggering to resolve validation failures. Target: **< 5%**.

## 2. Pacing & Diversity
- **Family Distribution**: Spread across the 12 Structural Families. Target: **Even Distribution** (~8.3% each).
- **Template Reusage Gap**: Minimum number of levels between identical templates. Target: **Min 3**.
- **Difficulty Curve**: average `bounceCount` and `mirrorCount` per 100 levels.

## 3. Performance Budget
| Metric | Soft Limit | Hard Limit |
| :--- | :--- | :--- |
| Generation Time (p95) | 200ms | 500ms |
| Ray Count | 30 | 50 |
| Bounce Count | 12 | 20 |
| Segment Count | 60 | 100 |

## 4. Operational Guardrails
- **Version Integrity**: `Version ID` must change if `lib/generator/templates` hash changes.
- **Recipe Derivation**: Seed must uniquely map to `Version:Index` pair.

## 5. Reporting
Metrics are generated by `test/qa/determinism_test.dart` and can be exported as a JSON manifest for external dashboards.
